//- Single Page of Room Model.

//-
	Templates by Routes.

//- List all rooms.
script(id="_rooms",type="text/ng-template")
	//- Include template to add room, Controller: addRoomCtrl.
	div(ng-include src=" '_add_room' ")

	//- Block List Rooms.
	br
	div
		label Rooms
		div(style="border:1px solid red;",ng-repeat="room in rooms")
			p {{ room.name }}
				a(ng-href="#/rooms/{{ room._id }}/{{ room.name }}")  | Access

			p Created: {{ room.created | date:'MM/dd/yyyy h:mm:ssa' }}

			p 0 Users connected.

			div(ng-switch,on="room.is_blocked")
				div(ng-switch-when="true") restricted
				div(ng-switch-when="false") open

			a(href="#",ng-show="room._owner._id == user._id || user.is_admin") edit

//- Get room by ID.
script(id="_room",type="text/ng-template")
	.col-lg-9.col-md-9.col-sm-9.col-xs-12
		.col-lg-12(ng-show="room")
			h5.cf-title
				strong Room:
				| {{ room.name }} -
				small.text-right.text-muted  {{ room.created | date:'MM/dd/yyyy h:mm:ssa' }}

		.col-lg-12(ng-show="fullscreen")
			.cf-display-fullscreen.col-lg-3.col-md-3.col-sm-3.col-xs-12
				.cf-panel-body
					span.cf-options.badge(ng-show="roomOptions.buttons")
						span.glyphicon.glyphicon-log-out.cf-text-muted(title="Disconnect",ng-click="disconnectRoom(room._id)",ng-show="roomOptions.connect")
						span.glyphicon.glyphicon-log-in.text-danger(title="Reconnect",ng-click="reconnectRoom(room._id, room.total)",ng-show="!roomOptions.connect")
						span.glyphicon.glyphicon-facetime-video.cf-text-muted(title="Disable Camera",ng-click="enableCamera(false)",ng-show="cameraOptions.enable")
						span.glyphicon.glyphicon-facetime-video.text-danger(title="Enable Camera",ng-click="enableCamera(true)",ng-show="!cameraOptions.enable")

					.cf-video
						video#cf-self-fullscreen.img-thumbnail(autoplay)

			video#cf-client-fullscreen.img-thumbnail(autoplay)

		#cf-self-stream-block.col-lg-3.col-md-3.col-sm-3.col-xs-12
			.cf-panel-body
				span.cf-options.badge
					span.glyphicon.glyphicon-log-out.cf-text-muted(title="Disconnect",ng-click="disconnectRoom(room._id)",ng-show="roomOptions.connect")
					span.glyphicon.glyphicon-log-in.text-danger(title="Reconnect",ng-click="reconnectRoom(room._id, room.total)",ng-show="!roomOptions.connect")
					span.glyphicon.glyphicon-facetime-video.cf-text-muted(title="Disable Camera",ng-click="enableCamera(false)",ng-show="cameraOptions.enable")
					span.glyphicon.glyphicon-facetime-video.text-danger(title="Enable Camera",ng-click="enableCamera(true)",ng-show="!cameraOptions.enable")

				.cf-video
					video#self.img-thumbnail(src="#")

		.col-lg-3.col-md-3.col-sm-3.col-xs-12.cf-client(ng-repeat="videoId in tagsVideo",id="client-{{ videoId }}",style="display:none;")
			.cf-panel-body
				span.cf-options.badge
					span.cf-client-button-fullscreen.glyphicon.glyphicon-fullscreen.cf-text-muted(title="Fullscreen",ng-click="setFullscreen(videoId)",data-cf-fullscreen-state="false")

				.cf-video
					video.img-thumbnail(id="{{ videoId }}")

	.col-lg-3.col-md-3.col-sm-3.col-xs-12
		.col-lg-12(ng-show="room")
			h5.cf-title
				strong Chat Room.

		.col-lg-12
			.cf-panel-body
				.cf-chats
					ul
						li(ng-repeat="chat in room.chats")
							a.cf-name(href="#") {{ chat.user.name }}
							span.cf-datetime  at {{ chat.created | date:'medium'  }}
							br
							span.cf-message {{ chat.msg }}

				form.cf-chat-form(name="form_send_chat_text")
					.input-group.has-success
						input.cf-input-message.form-control.input-sm(type="text",placeholder="Type a message here...",ngfocus,ng-model="chat.message",required)
						span.input-group-btn
							button.btn.btn-success.cf-btn-success.btn-sm(type="submit",ng-click="addMessageChat(chat)",onclick="jQuery('.cf-input-message').focus()",ng-disabled="!form_send_chat_text.$valid") Send

//-
	Templates without Routes.

//- Add Room.
script(id="_add_room",type="text/ng-template")
	//- Block Add Room.
	div(ng-controller="addRoomCtrl")
		label Add New Room
		form(name="form_add_room")
			label Name
			input(type="text",ng-model="room.name",required)
			| required

			br
			label Total of users can connecting
			input(type="number",ng-model="room.total",required)
			| required

			br
			input(type="checkbox",ng-model="room.is_blocked")
			| Blocked?

			br
			input(type="checkbox",ng-model="room.is_show")
			| Show?

			br
			select(multiple,ng-options="user._id as user.username for user in users",ng-model="room.users")

			br
			button(type="submit",ng-click="add(room)",ng-disabled="!form_add_room.$valid") Add Room
